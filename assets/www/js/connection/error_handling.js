// Generated by CoffeeScript 1.3.3
var E, ErrorHandler;

ErrorHandler = (function() {

  function ErrorHandler() {}

  ErrorHandler.prototype.handleError = function() {
    console.log("Sending error: " + (JSON.stringify(arguments)));
    return Bugsense.notify({
      error: arguments
    });
  };

  ErrorHandler.prototype.hookInto = function() {
    return jQuery("[onclick]").each(function(index, obj) {
      var funksjon;
      if (obj.onclick) {
        funksjon = obj.onclick;
        return obj.onclick = E(funksjon);
      }
    });
  };

  return ErrorHandler;

})();

window.customErrorHandler = new ErrorHandler();

window.onerror = function() {
  window.customErrorHandler.handleError.call(this, arguments);
  return main.showDialogWithMessage("Feilen rapporteres til utviklingsteamet. Hvis du ønsker å bidra med ytligere informasjon, merk tidspunktet og send en mail.");
};

E = function(funksjon) {
  return function() {
    try {
      return funksjon();
    } catch (e) {
      return window.onerror.call(this, e);
    }
  };
};
