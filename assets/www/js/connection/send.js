// Generated by CoffeeScript 1.3.1
var GetObjectFromServer, NveSend, SendObjectToServer;

NveSend = (function() {

  NveSend.name = 'NveSend';

  function NveSend() {}

  NveSend.prototype.login = function(name, pass, callback) {
    var _this = this;
    this.cridentials = {
      "userName": name,
      "password": pass,
      "createPersistentCookie": true,
      "Expires": "\/Date(" + new Date().getTime() + "-0100)\/"
    };
    return jQuery.ajax({
      type: 'POST',
      url: "http://h-web01.nve.no/stage_RegObsServices/Authentication_JSON_AppService.axd/Login",
      data: JSON.stringify(this.cridentials),
      dataType: 'json',
      headers: {
        Accept: "application/json; charset=utf-8",
        "Content-Type": "application/json; charset=utf-8"
      }
    }).complete(function(data) {
      if (callback) {
        return callback(data);
      }
    });
  };

  NveSend.prototype.logout = function(callback) {
    var _this = this;
    return jQuery.ajax({
      type: 'POST',
      url: "http://h-web01.nve.no/stage_RegObsServices/Authentication_JSON_AppService.axd/Logout",
      data: "",
      dataType: 'json',
      headers: {
        Accept: "application/json; charset=utf-8",
        "Content-Type": "application/json; charset=utf-8"
      }
    }).complete(function(data) {
      if (callback) {
        return callback(data);
      }
    });
  };

  NveSend.prototype.loggedInAs = function(callback) {
    var result;
    result = new Result;
    OData.request({
      requestUri: "http://h-web01.nve.no/stage_regobsservices/Odata.svc/Observer",
      method: "GET"
    }, function(data) {
      result.ok = true;
      result.data = data.results[0];
      if (callback) {
        return callback(data.results[0]);
      }
    });
    return result;
  };

  return NveSend;

})();

GetObjectFromServer = function(call, callback) {
  var result;
  result = new Result;
  OData.request({
    requestUri: call.url,
    method: "GET",
    data: ""
  }, function(data) {
    result.ok = true;
    result.data = data;
    if (callback) {
      return callback(data);
    }
  }, function(error) {
    /*
    		console.log(error)
    		alert("Error occurred in ::GetObjectFromServer #{error.message} #{call.url}")
    */

  });
  return result;
};

SendObjectToServer = function(obj, callback) {
  var result;
  result = new Result;
  OData.request({
    requestUri: obj.url,
    method: "POST",
    data: obj
  }, function(data) {
    result.ok = true;
    result.data = data;
    if (callback) {
      return callback(data);
    }
  }, function(err) {
    /*
    		console.log(err)
    		alert("Error occurred in ::SendObjectToServer #{err.message} #{obj.url}")
    */

  });
  return result;
};
