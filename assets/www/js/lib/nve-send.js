// Generated by CoffeeScript 1.3.1
var NveSend;

NveSend = (function() {

  NveSend.name = 'NveSend';

  function NveSend() {}

  NveSend.prototype.login = function(name, pass, callback) {
    var _this = this;
    this.cridentials = {
      "userName": name,
      "password": pass,
      "createPersistentCookie": true,
      "Expires": "\/Date(" + new Date().getTime() + "-0100)\/"
    };
    return jQuery.ajax({
      type: 'POST',
      url: "http://h-web01.nve.no/test_RegObsServices/Authentication_JSON_AppService.axd/Login",
      data: JSON.stringify(this.cridentials),
      dataType: 'json',
      headers: {
        Accept: "application/json; charset=utf-8",
        "Content-Type": "application/json; charset=utf-8"
      }
    }).complete(function(data) {
      if (callback) {
        return callback(data);
      }
    });
  };

  NveSend.prototype.addObsLocation = function(obsLocation, callback) {
    var result;
    result = new Result;
    OData.request({
      requestUri: "http://h-web01.nve.no/test_regobsservices/Odata.svc/ObsLocation",
      method: "POST",
      data: obsLocation
    }, function(data) {
      result.ok = true;
      result.data = data;
      if (callback) {
        return callback(data);
      }
    });
    return result;
  };

  NveSend.prototype.addRegistration = function(registration, callback) {
    var result;
    result = new Result;
    OData.request({
      requestUri: "http://h-web01.nve.no/test_regobsservices/Odata.svc/Registration",
      method: "POST",
      data: registration
    }, function(data) {
      result.ok = true;
      result.data = data;
      if (callback) {
        return callback(data);
      }
    });
    return result;
  };

  NveSend.prototype.loggedInAs = function() {
    var result;
    result = new Result;
    OData.request({
      requestUri: "http://h-web01.nve.no/test_regobsservices/Odata.svc/Observer",
      method: "GET"
    }, function(data) {
      result.ok = true;
      result.data = data.results[0];
      return console.log(data);
    });
    return result;
  };

  return NveSend;

})();
