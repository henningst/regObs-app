// Generated by CoffeeScript 1.3.1
var AvalangeDangerObs, Location, Login, NveStore, Registration, Result;

NveStore = (function() {
  var m_isLoggedIn, m_locations, m_observations, send;

  NveStore.name = 'NveStore';

  function NveStore() {}

  send = new NveSend;

  m_isLoggedIn = false;

  m_observations = [];

  m_locations = [];

  NveStore.prototype.login = function(userName, userPassword) {
    return send.login(userName, userPassword, this.loginCallback);
  };

  NveStore.prototype.loginCallback = function(data) {
    main.loginCallback(data);
    return m_isLoggedIn = true;
  };

  NveStore.prototype.isLoggedIn = function() {
    return m_isLoggedIn;
  };

  NveStore.prototype.loggedInAs = function() {
    return send.loggedInAs();
  };

  NveStore.prototype.addObsLocation = function(location) {
    return m_locations.push(location);
  };

  NveStore.prototype.getObsLocations = function() {
    return m_locations;
  };

  NveStore.prototype.addAvalangeDanger = function(obs) {
    return m_observations.push(obs);
  };

  NveStore.prototype.getAvalangeDanger = function() {
    return m_observations;
  };

  NveStore.prototype.addRegistration = function(registration, callback) {
    return send.addRegistration(registration, callback);
  };

  NveStore.prototype.sendAll = function() {
    var location;
    location = new Location(null, 33, 103222, 6982346, new Date());
    return send.addObsLocation(location, this.zweiter);
  };

  NveStore.prototype.zweiter = function(data) {
    var registration;
    registration = new Registration(null, main.login.data.ObserverID, data.ObsLocationID, new Date(), new Date());
    return main.store.addRegistration(registration, main.store.calli);
  };

  NveStore.prototype.calli = function(data) {
    var obs;
    console.log(data);
    obs = m_observations[0];
    send.sendStandart(obs, "AvalancheDangerObs", this.p);
    return console.log(obs);
  };

  NveStore.prototype.p = function(data) {
    return console.log(data);
  };

  return NveStore;

})();

Login = (function() {

  Login.name = 'Login';

  function Login(username, password) {
    this.username = username;
    this.password = password;
  }

  return Login;

})();

Location = (function() {

  Location.name = 'Location';

  function Location(ObsLocationID, UTMZone, UTMEast, UTMNorth, DtRegTime) {
    this.ObsLocationID = ObsLocationID;
    this.UTMZone = UTMZone;
    this.UTMEast = UTMEast;
    this.UTMNorth = UTMNorth;
    this.DtRegTime = DtRegTime;
  }

  return Location;

})();

Registration = (function() {

  Registration.name = 'Registration';

  Registration.prototype.url = "http://h-web01.nve.no/test_regobsservices/Odata.svc/Registration";

  function Registration(RegID, ObserverID, ObsLocationID, DtRegTime, DtObsTime) {
    this.RegID = RegID;
    this.ObserverID = ObserverID;
    this.ObsLocationID = ObsLocationID;
    this.DtRegTime = DtRegTime;
    this.DtObsTime = DtObsTime;
  }

  return Registration;

})();

Result = (function() {

  Result.name = 'Result';

  function Result() {
    this.ok = false;
    this.data = null;
  }

  Result.prototype.isOk = function() {
    return this.ok;
  };

  return Result;

})();

AvalangeDangerObs = (function() {

  AvalangeDangerObs.name = 'AvalangeDangerObs';

  function AvalangeDangerObs(AvalancheDangerObsID, RegID, DangerSignTID, UsageFlagTID, Comment) {
    this.AvalancheDangerObsID = AvalancheDangerObsID;
    this.RegID = RegID;
    this.DangerSignTID = DangerSignTID;
    this.UsageFlagTID = UsageFlagTID;
    this.Comment = Comment;
  }

  return AvalangeDangerObs;

})();
